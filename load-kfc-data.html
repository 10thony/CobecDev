
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Load KFC Data to IndexedDB</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .status { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .success { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background-color: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        button { padding: 10px 20px; margin: 5px; cursor: pointer; }
        pre { background-color: #f8f9fa; padding: 10px; border-radius: 5px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>Load KFC Data to IndexedDB</h1>
    <div id="status"></div>
    <button onclick="loadData()">Load KFC Data to IndexedDB</button>
    <button onclick="checkData()">Check IndexedDB Data</button>
    <button onclick="clearData()">Clear IndexedDB Data</button>
    <div id="output"></div>

    <script>
        const kfcData = [
  {
    "name": "Joe Carino",
    "events": [
      {
        "type": "Team",
        "month": "MARCH"
      }
    ],
    "march_status": null,
    "score": 10
  },
  {
    "name": "Scott Gardner",
    "events": [
      {
        "type": "Team",
        "month": "MARCH"
      }
    ],
    "march_status": null,
    "score": 10
  },
  {
    "name": "Dexter Ithal",
    "events": [
      {
        "type": "Team",
        "month": "MARCH"
      },
      {
        "type": "Individ",
        "month": "JULY"
      },
      {
        "type": "Team",
        "month": "DEC"
      }
    ],
    "march_status": "May - TEAM",
    "score": 60
  },
  {
    "name": "Michelle Ehlinger",
    "events": [
      {
        "type": "Team",
        "month": "MARCH"
      },
      {
        "type": "Team",
        "month": "SEPT"
      },
      {
        "type": "Team",
        "month": "DEC"
      }
    ],
    "march_status": "May - TEAM",
    "score": 40
  },
  {
    "name": "Annette Barlia",
    "events": [
      {
        "type": "Team",
        "month": "MARCH"
      },
      {
        "type": "Team",
        "month": "SEPT"
      }
    ],
    "march_status": "May - TEAM",
    "score": 30
  },
  {
    "name": "Brannon Johanson",
    "events": [
      {
        "type": "Team",
        "month": "MARCH"
      },
      {
        "type": "Team",
        "month": "SEPT"
      }
    ],
    "march_status": "May - TEAM",
    "score": 30
  },
  {
    "name": "Matt Chesnut",
    "events": [
      {
        "type": "Team",
        "month": "MARCH"
      },
      {
        "type": "Individ",
        "month": "JULY"
      },
      {
        "type": "Team",
        "month": "SEPT"
      }
    ],
    "march_status": "May - TEAM, MAY - INDIVID",
    "score": 70
  },
  {
    "name": "Shawn Sanchez",
    "events": [
      {
        "type": "Team",
        "month": "MARCH"
      }
    ],
    "march_status": null,
    "score": 10
  },
  {
    "name": "Scott White",
    "events": [
      {
        "type": "Team",
        "month": "MARCH"
      }
    ],
    "march_status": null,
    "score": 10
  },
  {
    "name": "Chris Dumesnil",
    "events": [
      {
        "type": "Team",
        "month": "MARCH"
      }
    ],
    "march_status": "May - TEAMx2",
    "score": 30
  },
  {
    "name": "Curtis Lineberry",
    "events": [
      {
        "type": "Team",
        "month": "MARCH"
      }
    ],
    "march_status": null,
    "score": 10
  },
  {
    "name": "Aaron Willems",
    "events": [
      {
        "type": "Team",
        "month": "MAY"
      },
      {
        "type": "Individ",
        "month": "JULY"
      },
      {
        "type": "Team",
        "month": "Dec",
        "quantity": 2
      }
    ],
    "march_status": "March - INDIVID, March - TEAM; May - TEAM",
    "score": 90
  },
  {
    "name": "Jenn Billo",
    "events": [
      {
        "type": "Team",
        "month": "MAY"
      }
    ],
    "march_status": "March - TEAM x2;",
    "score": 30
  },
  {
    "name": "George Bayer",
    "events": [
      {
        "type": "Team",
        "month": "MAY"
      }
    ],
    "march_status": null,
    "score": 10
  },
  {
    "name": "Jenny Lampe",
    "events": [
      {
        "type": "Team",
        "month": "MAY"
      }
    ],
    "march_status": null,
    "score": 10
  },
  {
    "name": "Marina Tucker",
    "events": [
      {
        "type": "Team",
        "month": "MAY"
      },
      {
        "type": "Team",
        "month": "DEC"
      }
    ],
    "march_status": null,
    "score": 20
  },
  {
    "name": "Ted Schuneman",
    "events": [
      {
        "type": "Team",
        "month": "MAY"
      },
      {
        "type": "Team",
        "month": "DEC"
      }
    ],
    "march_status": "March - INDIVID; May - TEAM, May - INDIVID",
    "score": 70
  },
  {
    "name": "Ellen Clark",
    "events": [
      {
        "type": "Team",
        "month": "MAY"
      }
    ],
    "march_status": null,
    "score": 10
  },
  {
    "name": "Dan French",
    "events": [
      {
        "type": "Team",
        "month": "MAY"
      },
      {
        "type": "Team",
        "month": "DEC"
      }
    ],
    "march_status": "May - TEAMx2",
    "score": 40
  },
  {
    "name": "David Wickwire",
    "events": [
      {
        "type": "Team",
        "month": "MARCH"
      },
      {
        "type": "Team",
        "month": "MAY"
      },
      {
        "type": "Team",
        "month": "SEPT"
      },
      {
        "type": "Team",
        "month": "DEC"
      }
    ],
    "march_status": "March - TEAM",
    "score": 50
  },
  {
    "name": "Alicia Spezialetti",
    "events": [
      {
        "type": "Team",
        "month": "MARCH"
      },
      {
        "type": "Team",
        "month": "MAY"
      },
      {
        "type": "Team",
        "month": "DEC"
      }
    ],
    "march_status": "March - INDIVID;",
    "score": 50
  },
  {
    "name": "Mary Wroth",
    "events": [
      {
        "type": "Team",
        "month": "MARCH"
      },
      {
        "type": "Team",
        "month": "MAY"
      }
    ],
    "march_status": null,
    "score": 20
  },
  {
    "name": "Brian Carroll",
    "events": [
      {
        "type": "Team",
        "month": "MARCH"
      },
      {
        "type": "Team",
        "month": "MAY"
      },
      {
        "type": "Individ",
        "month": "SEPT"
      }
    ],
    "march_status": "May - INDIVID, May - Teamx2",
    "score": 80
  },
  {
    "name": "Sriram Krishnan",
    "events": [
      {
        "type": "Team",
        "month": "MARCH"
      },
      {
        "type": "Team",
        "month": "MAY"
      }
    ],
    "march_status": "May - TEAM,",
    "score": 30
  },
  {
    "name": "Lisa Brown",
    "events": [
      {
        "type": "Individ",
        "month": "MARCH"
      }
    ],
    "march_status": null,
    "score": 20
  },
  {
    "name": "Mike Reiter",
    "events": [
      {
        "type": "Team",
        "month": "MARCH"
      },
      {
        "type": "Team",
        "month": "MAY"
      },
      {
        "type": "Individ",
        "month": "July"
      }
    ],
    "march_status": "May - TEAMx3",
    "score": 70
  },
  {
    "name": "Adrian Aguinaldo",
    "events": [
      {
        "type": "Team",
        "month": "MARCH"
      },
      {
        "type": "Team",
        "month": "MAY"
      },
      {
        "type": "Team",
        "month": "SEPT"
      },
      {
        "type": "Team",
        "month": "DEC"
      }
    ],
    "march_status": "March - TEAM",
    "score": 50
  },
  {
    "name": "Justin Martinez",
    "events": [
      {
        "type": "Individ",
        "month": "MAY"
      },
      {
        "type": "Individ",
        "month": "Dec",
        "quantity": 2
      }
    ],
    "march_status": "May - INDIVID;",
    "score": 80
  },
  {
    "name": "Kristin Scully",
    "events": [
      {
        "type": "Individ",
        "month": "MAY"
      },
      {
        "type": "Individ",
        "month": "JULY"
      },
      {
        "type": "Individ",
        "month": "SEPT"
      }
    ],
    "march_status": "March - INDIVID;",
    "score": 40
  },
  {
    "name": "Kyle Evans",
    "events": [
      {
        "type": "Individ",
        "month": "MAY"
      },
      {
        "type": "Individ",
        "month": "SEPT"
      }
    ],
    "march_status": "May - INDIVID;",
    "score": 60
  },
  {
    "name": "Nick Amatuzzi",
    "events": [
      {
        "type": "Team",
        "month": "MAY",
        "quantity": 2
      },
      {
        "type": "Team",
        "month": "SEPT"
      },
      {
        "type": "Team",
        "month": "DEC"
      }
    ],
    "march_status": "March - TEAM; May - TEAM",
    "score": 60
  },
  {
    "name": "Carly DeRose",
    "events": [
      {
        "type": "Individ",
        "month": "MAY"
      },
      {
        "type": "Team",
        "month": "July"
      },
      {
        "type": "Individ",
        "month": "DEC"
      }
    ],
    "march_status": "May - TEAM",
    "score": 60
  },
  {
    "name": "Nick Celio",
    "events": [
      {
        "type": "Individ",
        "month": "MARCH"
      },
      {
        "type": "Team",
        "month": "MAY"
      },
      {
        "type": "Team",
        "month": "July"
      }
    ],
    "march_status": "March - TEAM",
    "score": 50
  },
  {
    "name": "Andrew Winchell",
    "events": [
      {
        "type": "Team",
        "month": "MARCH"
      },
      {
        "type": "Team",
        "month": "MAY",
        "quantity": 2
      },
      {
        "type": "Individ",
        "month": "JULY"
      },
      {
        "type": "Team",
        "month": "DEC",
        "quantity": 2
      },
      {
        "type": "Individ",
        "month": "DEC"
      }
    ],
    "march_status": "March - TEAM; May - INDIVID",
    "score": 120
  },
  {
    "name": "Jack Hom",
    "events": [
      {
        "type": "Individ",
        "month": "MARCH"
      },
      {
        "type": "Team",
        "month": "MAY"
      },
      {
        "type": "Team",
        "month": "SEPT"
      },
      {
        "type": "Individ",
        "month": "Dec"
      }
    ],
    "march_status": "March - INDIVID, March - TEAM; May - TEAM",
    "score": 100
  },
  {
    "name": "Jon Cardiello",
    "events": [
      {
        "type": "Team",
        "month": "MAY"
      },
      {
        "type": "Individ",
        "month": "MAY"
      }
    ],
    "march_status": null,
    "score": 30
  },
  {
    "name": "Ali Caico",
    "events": [
      {
        "type": "Team",
        "month": "MAY",
        "quantity": 3
      },
      {
        "type": "Individ",
        "month": "JULY"
      },
      {
        "type": "Team",
        "month": "DEC"
      }
    ],
    "march_status": "March - TEAM",
    "score": 70
  },
  {
    "name": "Theodore Smith",
    "events": [
      {
        "type": "Individ",
        "month": "MAY"
      },
      {
        "type": "Team",
        "month": "MAY"
      }
    ],
    "march_status": "May - TEAM",
    "score": 40
  },
  {
    "name": "Philip Ashtianie",
    "events": [
      {
        "type": "Individ",
        "month": "JULY"
      },
      {
        "type": "Team",
        "month": "DEC"
      }
    ],
    "march_status": "May - TEAM, MAY - INDIVID;",
    "score": 60
  },
  {
    "name": "Nathan McQueen",
    "events": [
      {
        "type": "Team",
        "month": "SEPT"
      }
    ],
    "march_status": null,
    "score": 10
  },
  {
    "name": "Anna Matveeva",
    "events": [
      {
        "type": "Individ",
        "month": "SEPT"
      },
      {
        "type": "Individ",
        "month": "DEC"
      }
    ],
    "march_status": "March - INDIVID;",
    "score": 60
  },
  {
    "name": "Alan Stensland",
    "events": [
      {
        "type": "Individ",
        "month": "SEPT"
      }
    ],
    "march_status": "May - INDIVID;",
    "score": 40
  },
  {
    "name": "Mike Prater",
    "events": [
      {
        "type": "Individ",
        "month": "SEPT"
      }
    ],
    "march_status": null,
    "score": 20
  },
  {
    "name": "Eric Peters",
    "events": [
      {
        "type": "Team",
        "month": "DEC"
      }
    ],
    "march_status": null,
    "score": 10
  },
  {
    "name": "Sukaina Al Shami",
    "events": [
      {
        "type": "Individ",
        "month": "DEC"
      }
    ],
    "march_status": "May - TEAM,",
    "score": 20
  },
  {
    "name": "Memi Oladapo",
    "events": [],
    "march_status": "March - TEAM",
    "score": 10
  },
  {
    "name": "Pam Simonovich",
    "events": [],
    "march_status": "March - INDIVID;",
    "score": 20
  },
  {
    "name": "Wilfred Tagud",
    "events": [],
    "march_status": "March - INDIVID;",
    "score": 20
  },
  {
    "name": "Cris Shaw",
    "events": [],
    "march_status": "May - TEAMx2",
    "score": 20
  },
  {
    "name": "Mo Hoffman",
    "events": [],
    "march_status": "May - TEAM,",
    "score": 10
  },
  {
    "name": "Gina Weare",
    "events": [],
    "march_status": "May - INDIVID;",
    "score": 20
  },
  {
    "name": "Micah Kimel",
    "events": [],
    "march_status": "May - INDIVID;",
    "score": 20
  },
  {
    "name": "Stu Dornfeld",
    "events": [],
    "march_status": "May - TEAM",
    "score": 10
  },
  {
    "name": "Chad Craun",
    "events": [],
    "march_status": "May - TEAM",
    "score": 10
  },
  {
    "name": "Geoff lelliott",
    "events": [],
    "march_status": "May - TEAM",
    "score": 10
  },
  {
    "name": "Hina Imam",
    "events": [],
    "march_status": "May - TEAM",
    "score": 10
  },
  {
    "name": "Mitch Stevens",
    "events": [],
    "march_status": "May - TEAM",
    "score": 10
  },
  {
    "name": "David Rose",
    "events": [],
    "march_status": "May - INDIVID;",
    "score": 20
  },
  {
    "name": "Ebony Brooks",
    "events": [],
    "march_status": "May - INDIVID;",
    "score": 20
  },
  {
    "name": "Carl Martino",
    "events": [],
    "march_status": "May - INDIVID;",
    "score": 20
  },
  {
    "name": "Nate Swetland",
    "events": [],
    "march_status": "May - INDIVID;",
    "score": 20
  },
  {
    "name": "Cleo",
    "events": [],
    "march_status": "May - TEAM",
    "score": 10
  }
];
        
        function showStatus(message, type = 'info') {
            const statusDiv = document.getElementById('status');
            statusDiv.innerHTML = `<div class="status ${type}">${message}</div>`;
        }

        function showOutput(content) {
            const outputDiv = document.getElementById('output');
            outputDiv.innerHTML = `<pre>${JSON.stringify(content, null, 2)}</pre>`;
        }

        async function loadData() {
            try {
                showStatus('Loading KFC data to IndexedDB...', 'info');
                
                // Open IndexedDB
                const request = indexedDB.open('workdemos', 1);
                
                request.onerror = () => {
                    showStatus('Error opening IndexedDB: ' + request.error, 'error');
                };
                
                request.onsuccess = () => {
                    const db = request.result;
                    
                    // Load KFC points
                    const kfcTransaction = db.transaction(['kfcpoints'], 'readwrite');
                    const kfcStore = kfcTransaction.objectStore('kfcpoints');
                    
                    let kfcSuccessCount = 0;
                    let kfcFailCount = 0;
                    
                    kfcData.forEach((entry, index) => {
                        const kfcEntry = {
                            ...entry,
                            _id: Date.now().toString(36) + Math.random().toString(36).substr(2),
                            createdAt: new Date(),
                            updatedAt: new Date()
                        };
                        
                        const addRequest = kfcStore.add(kfcEntry);
                        addRequest.onsuccess = () => {
                            kfcSuccessCount++;
                            console.log(`‚úÖ Added KFC entry: ${entry.name}`);
                        };
                        addRequest.onerror = () => {
                            kfcFailCount++;
                            console.error(`‚ùå Failed to add KFC entry: ${entry.name}`, addRequest.error);
                        };
                    });
                    
                    // Load employees
                    const employeesTransaction = db.transaction(['employees'], 'readwrite');
                    const employeesStore = employeesTransaction.objectStore('employees');
                    
                    // Extract unique employee names
                    const employeeNames = [...new Set(kfcData.map(entry => entry.name))];
                    let employeeSuccessCount = 0;
                    let employeeFailCount = 0;
                    
                    employeeNames.forEach(name => {
                        const employee = {
                            _id: Date.now().toString(36) + Math.random().toString(36).substr(2),
                            name: name,
                            createdAt: new Date(),
                            updatedAt: new Date()
                        };
                        
                        const addRequest = employeesStore.add(employee);
                        addRequest.onsuccess = () => {
                            employeeSuccessCount++;
                            console.log(`‚úÖ Added employee: ${name}`);
                        };
                        addRequest.onerror = () => {
                            employeeFailCount++;
                            console.error(`‚ùå Failed to add employee: ${name}`, addRequest.error);
                        };
                    });
                    
                    // Wait for transactions to complete
                    kfcTransaction.oncomplete = () => {
                        employeesTransaction.oncomplete = () => {
                            showStatus(`‚úÖ Successfully loaded data! KFC: ${kfcSuccessCount} success, ${kfcFailCount} failed. Employees: ${employeeSuccessCount} success, ${employeeFailCount} failed.`, 'success');
                        };
                    };
                };
                
                request.onupgradeneeded = (event) => {
                    const db = event.target.result;
                    
                    // Create collections (object stores)
                    if (!db.objectStoreNames.contains('kfcpoints')) {
                        const kfcStore = db.createObjectStore('kfcpoints', { keyPath: '_id', autoIncrement: true });
                        kfcStore.createIndex('name', 'name', { unique: true });
                    }

                    if (!db.objectStoreNames.contains('employees')) {
                        const employeesStore = db.createObjectStore('employees', { keyPath: '_id', autoIncrement: true });
                        employeesStore.createIndex('name', 'name', { unique: true });
                    }
                };
                
            } catch (error) {
                showStatus('Error loading data: ' + error.message, 'error');
            }
        }

        async function checkData() {
            try {
                showStatus('Checking IndexedDB data...', 'info');
                
                const request = indexedDB.open('workdemos', 1);
                
                request.onsuccess = () => {
                    const db = request.result;
                    
                    // Check KFC points
                    const kfcTransaction = db.transaction(['kfcpoints'], 'readonly');
                    const kfcStore = kfcTransaction.objectStore('kfcpoints');
                    const kfcRequest = kfcStore.getAll();
                    
                    // Check employees
                    const employeesTransaction = db.transaction(['employees'], 'readonly');
                    const employeesStore = employeesTransaction.objectStore('employees');
                    const employeesRequest = employeesStore.getAll();
                    
                    kfcRequest.onsuccess = () => {
                        employeesRequest.onsuccess = () => {
                            const result = {
                                kfcPoints: {
                                    count: kfcRequest.result.length,
                                    sample: kfcRequest.result.slice(0, 3)
                                },
                                employees: {
                                    count: employeesRequest.result.length,
                                    sample: employeesRequest.result.slice(0, 3)
                                }
                            };
                            
                            showStatus(`üìä IndexedDB contains ${result.kfcPoints.count} KFC entries and ${result.employees.count} employees`, 'success');
                            showOutput(result);
                        };
                    };
                };
                
            } catch (error) {
                showStatus('Error checking data: ' + error.message, 'error');
            }
        }

        async function clearData() {
            try {
                showStatus('Clearing IndexedDB data...', 'info');
                
                const request = indexedDB.deleteDatabase('workdemos');
                
                request.onsuccess = () => {
                    showStatus('‚úÖ IndexedDB data cleared successfully!', 'success');
                };
                
                request.onerror = () => {
                    showStatus('‚ùå Error clearing data: ' + request.error, 'error');
                };
                
            } catch (error) {
                showStatus('Error clearing data: ' + error.message, 'error');
            }
        }
    </script>
</body>
</html>
    